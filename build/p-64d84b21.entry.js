import{r as t,c as s,h as i,H as e,g as h}from"./p-ce6a1db2.js";import{m as n}from"./p-07f78ce2.js";const r="";const a=class{constructor(i){t(this,i);this.catOpen=s(this,"catOpen",7);this.catClose=s(this,"catClose",7);this.catChange=s(this,"catChange",7);this.catBlur=s(this,"catBlur",7);this.state=undefined;this.hasSlottedLabel=false;this.hasSlottedHint=false;this.errorMap=undefined;this.requiredMarker="optional";this.horizontal=false;this.multiple=false;this.placement="bottom-start";this.value=undefined;this.disabled=false;this.placeholder=undefined;this.hint=undefined;this.identifier=undefined;this.label="";this.name=undefined;this.labelHidden=false;this.required=false;this.clearable=false;this.max=undefined;this.min=undefined;this.noItems=undefined;this.errors=undefined;this.errorUpdate=0;this.nativeAttributes=undefined;this.minutesStep=30;this.hourShort=this.isBrowserHour12()}componentWillRender(){this.hasSlottedLabel=!!this.hostElement.querySelector('[slot="label"]');this.hasSlottedHint=!!this.hostElement.querySelector('[slot="hint"]')}componentDidLoad(){this.timeSelect?.connect(this.timeConnector)}render(){return i(e,null,i("cat-select",{requiredMarker:this.requiredMarker,horizontal:this.horizontal,clearable:this.clearable,disabled:this.disabled,hint:this.hint,identifier:this.identifier,label:this.label,labelHidden:this.labelHidden,name:this.name,multiple:this.multiple,placeholder:this.placeholder,placement:this.placement,required:this.required,noItems:this.noItems,ref:t=>this.timeSelect=t,value:this.value,errors:this.errors,errorUpdate:this.errorUpdate,nativeAttributes:this.nativeAttributes,onCatChange:t=>this.onCatChange(t),onCatOpen:this.onCatOpen.bind(this),onCatClose:this.onCatClose.bind(this),onCatBlur:this.onCatBlur.bind(this)},this.hasSlottedLabel&&i("span",{slot:"label"},i("slot",{name:"label"})),this.hasSlottedHint&&i("span",{slot:"hint"},i("slot",{name:"hint"}))))}get timeConnector(){return{resolve:t=>n(t.map((t=>this.timeArray.find((s=>s.hour===this.getHour(t)&&s.minutes===this.getMinutes(t)))))),retrieve:t=>{const s=this.timeArray.filter((s=>{if(!t)return true;const i=this.hourShort?this.formatAMPM(s.hour,s.minutes):this.formatTime(s.hour,s.minutes);return i.toUpperCase().includes(t.toUpperCase())}));return n({last:true,totalElements:s.length,content:s})},render:({hour:t,minutes:s})=>({label:this.hourShort?this.formatAMPM(t,s):this.formatTime(t,s)})}}get timeArray(){const t=[];for(let s=0;s<24;s++){for(let i=0;i<60;i+=this.minutesStep){if(this.isHigherThanMinValue(s,i)&&this.isLowerThanMaxValue(s,i)){t.push({id:this.hourShort?this.formatAMPM(s,i):this.formatTime(s,i),hour:s,minutes:i})}}}return t}isBrowserHour12(){const t=window?.navigator?.language??"en";const s=new Intl.DateTimeFormat(t,{hour:"numeric"}).format((new Date).setHours(16));return s.toLowerCase().includes("pm")}getHour(t){let s=Number(t.split(":")[0]);if(t.toLowerCase().includes("pm")&&s<12)s=s+12;if(t.toLowerCase().includes("am")&&s==12)s=s-12;return s}getMinutes(t){const s=t.match(/:(\d+)/);return Number(s?s[1]:0)}isHigherThanMinValue(t,s){if(this.min){const i=this.getHour(this.min);const e=this.getMinutes(this.min);return t>i||t===i&&s>=e}return true}isLowerThanMaxValue(t,s){if(this.max){const i=this.getHour(this.max);const e=this.getMinutes(this.max);return t<i||t===i&&s<=e}return true}formatAMPM(t,s){if(t===0){return`12:${s<10?`0${s}`:s} AM`}else if(t<12){return`${t<10?`0${t}`:t}:${s<10?`0${s}`:s} AM`}else{return`${t%12<10?`0${t%12}`:t%12}:${s<10?`0${s}`:s} PM`}}formatTime(t,s){return`${t<10?`0${t}`:t}:${s<10?`0${s}`:s}`}onCatChange(t){t.stopPropagation();this.value=this.timeSelect?.value;this.catChange.emit(t)}onCatOpen(t){t.stopPropagation();this.catOpen.emit(t)}onCatClose(t){t.stopPropagation();this.catClose.emit(t)}onCatBlur(t){t.stopPropagation();this.catBlur.emit(t)}get hostElement(){return h(this)}};a.style=r;export{a as cat_timepicker};
//# sourceMappingURL=p-64d84b21.entry.js.map